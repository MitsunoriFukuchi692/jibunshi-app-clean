<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>自分史ジェネレーター</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS 読み込み -->
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>

  <h1>自分史ジェネレーター</h1>

  <!-- 章ボタン（例） -->
  <div id="chapterArea">
    <button class="preset-btn">第1章 生い立ち</button>
    <button class="preset-btn">第2章 学生時代</button>
    <button class="preset-btn">第3章 仕事</button>
    <button class="preset-btn">第4章 家族</button>
    <button class="preset-btn">第5章 転機</button>
    <button class="preset-btn">第6章 これから</button>
  </div>

  <!-- 質問テンプレ表示欄 -->
  <div id="presetArea" style="margin-top:10px;">
    <button class="preset-btn">幼少期の家庭環境（家族構成／暮らしの雰囲気）を温もりある描写で。</button>
    <button class="preset-btn">いちばん好きだった遊びと、その時の匂い・音・季節の感覚を書いてください。</button>
    <button class="preset-btn">祖父母・近所の大人から言われて印象に残っている言葉は？</button>
  </div>

  <!-- 質問入力欄 -->
  <div style="margin-top: 20px;">
    <textarea id="questionInput" placeholder="ここに質問または音声入力をしてください" rows="4"></textarea><br>
    <button id="voiceBtn">🎤 音声入力</button>
    <button id="generateBtn">生成</button>
    <button id="clearBtn">クリア</button>
    <button id="addQuestionBtn">質問欄に追加</button>
  </div>

  <!-- 結果表示欄 -->
  <div style="margin-top: 20px;">
    <textarea id="resultArea" placeholder="ここに生成結果が表示されます" rows="10"></textarea><br>
    <button id="copyResultBtn">結果をコピー</button>
    <button id="downloadTxtBtn">.txtでDL</button>
  </div>

  <!-- ▼ ここを修正しました（キャッシュ対策付きで最新のJSを読み込む） -->
  <script>
    const s = document.createElement('script');
    s.src = '/static/js/jibunshi.js?v=' + Date.now();
    document.head.appendChild(s);
  </script>

<!-- 音声入力欄 -->
<div style="margin-top: 20px;">
  <textarea id="questionInput" placeholder="ここに質問または音声入力をしてください" rows="4"></textarea><br>
  <button id="voiceBtn">🎤 音声入力</button>
  <button id="generateBtn">生成</button>
  <button id="clearBtn">クリア</button>
  <button id="addQuestionBtn">質問欄に追加</button>
</div>

</body>
</html>
